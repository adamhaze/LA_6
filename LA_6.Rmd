---
title: "Lab_6"
author: "Adam Hayes, Jasmine Sanchez, Erin Omyer, Richard Park"
date: "2/20/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
COflights <- read_csv("https://files.osf.io/v1/resources/3z5as4pej8/providers/osfstorage/5a8ca28f57103100104584db")


```
#What Factors Lead To On-Time Arrival in Denver?

###Importance


###The shorter the flight distance the increase in arrival delay
```{r}

ggplot(data = COflights) + geom_point(mapping = aes(x = DISTANCE, y = ARR_DELAY), color = 'blue', position = 'dodge', na.rm = TRUE) + coord_flip()

```

####comments
When the distance of a flight decreases, the chances of an arrival delay are higher. The longer the flight distance, the less chance of an arrival delay. This means that a short flight distance increases the arrival delay.

###Having a weather delay in correlation with the flight's scheduled arrival time
```{r}
DEN_flights <- COflights%>%
  filter(DEST == "DEN")

ggplot(data = DEN_flights)+
  geom_point(aes(x = CRS_ARR_TIME,y = WEATHER_DELAY, colour = DISTANCE), position = "jitter",na.rm =TRUE)
```

####comments
There is a strong trend between the scheduled arrival time of a flight landing in colorado and the number of flights that have also been delayed due to weather. As the scheduled arrival time increases (gets later), there is a higher chance of theflight being delayed due to weather. Therefore, having an earlier schuled flight time will contribute and more accurately lead to an on-time arrival.
Also, as the distance of the flight decreases, there is another trend in higher opportunities for there being a delay in the flight due to weather. With that, it may also be more beneficial for flyers at a greater distance from Denver to decrease their chances of having a delayed flight due to weather. 

###Our Recommendation


###Erin's Findings


####Probability of delayed flights to Denver with air time greater than 4 hours

```{r}
prob_delayDEN <- COflights %>%
  filter(ARR_DELAY > 0 & AIR_TIME > 240, DEST == 'DEN') %>%
  count()
total_delayDEN <- COflights %>%
  filter(ARR_DELAY > 0, DEST == 'DEN') %>%
  count()

prob_delayDEN/total_delayDEN
```

####Probability of delayed flights to Denver with air time less than 2 hours

```{r}
prob_delayDEN2 <- COflights %>%
  filter(ARR_DELAY > 5 & AIR_TIME < 120, DEST == 'DEN') %>%
  count()
total_delayDEN <- COflights %>%
  filter(ARR_DELAY > 0, DEST == 'DEN') %>%
  count()
prob_delayDEN2/total_delayDEN
```

####comments
From the probabilities displayed above, as the air time increases, the probability of an arrival delay decreases. As the air time decreases, then the probability of an arrival delay increases. It is roughly around 4 percent probabilty of a delayed arrival for a flight longer than 4 hours. But, for flights less than 2 hour, there is a 40 percent probability of a delayed arrival. 


###Jasmine's Findings

####Probability of delayed arrivals to Denver with a flight distance greater than 1000 miles
```{r}
delayed_arrival <- COflights%>%
  filter(DEST == "DEN", DISTANCE > 1000 & ARR_DELAY >0)%>%
  count()

DEN_total_delay <- COflights%>%
  filter(DEST == "DEN", ARR_DELAY)%>%
  count()

delayed_arrival/DEN_total_delay
```

####Probability of delayed arrivals to Denver with a flight distance less than 600 miles
```{r}
delayed_arrival_2 <- COflights%>%
  filter(DEST == "DEN", DISTANCE < 500 & ARR_DELAY >0)%>%
  count()

delayed_arrival_2/DEN_total_delay
```

####comments
As displayed by the probabilities above, there is a higher chance in the flights to Denver having a delayed arrival as the distance between states increases. This contradicts the earlier plot that had been discussed for all colorado flights with the weather delays showing opposing trends. Also, as the distance between states decrease by half the distance, there is a 5.72% difference in flights having delayed arrivals into Denver, which is almost a 3x increase. 

###Adam's Findings

####Probability that taxi out time will increase the chance of a delayed departure

```{r}
delayed_departures <- COflights %>%
  filter(ORIGIN == 'DEN', DEP_DELAY >= 15)%>%
  count()

delayed_departures_taxi <- COflights %>%
  filter(ORIGIN == 'DEN', DEP_DELAY >= 15, TAXI_OUT >= 10)%>%
  count()

delayed_departures_taxi / delayed_departures

delayed_departures_graph <- COflights %>%
  filter(ORIGIN == 'DEN', DEP_DELAY >= 15)

ggplot(data = delayed_departures_graph, mapping = aes(x = TAXI_OUT ))+
  geom_histogram(xlim = c(0,100), binwidth = 5, color = "red")+
  labs( title = "Taxi Out time distr. for Delayed Departures")
```

####Probability that morning departure time decreases chance of a delayed departure

```{r}
delayed_departures_time <- COflights %>%
  filter(ORIGIN == 'DEN', DEP_DELAY >= 15, DEP_TIME <=1200)%>%
  count()

delayed_departures_time / delayed_departures

ggplot(data = delayed_departures_graph, mapping = aes(x = DEP_TIME))+
  geom_histogram(stat = "count")+
  labs(title = "Depart Time distr. for Delayed Departures")
```

